\hypertarget{_encrypted_io_queue_8c}{}\section{Driver/\+Encrypted\+Io\+Queue.c File Reference}
\label{_encrypted_io_queue_8c}\index{Driver/\+Encrypted\+Io\+Queue.\+c@{Driver/\+Encrypted\+Io\+Queue.\+c}}


Manage the fragment for encryption on the drive, the sending for irp packets and device filter. The encryption queue will order the axtions to do.  


{\ttfamily \#include \char`\"{}Gstdefs.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Apidrvr.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Ntdriver.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Drive\+Filter.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Encrypted\+Io\+Queue.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Encryption\+Thread\+Pool.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Volumes.\+h\char`\"{}}\newline
Include dependency graph for Encrypted\+Io\+Queue.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_encrypted_io_queue_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
N\+T\+S\+T\+A\+T\+US \hyperlink{_encrypted_io_queue_8c_a6ad0720d3b1044c4b1d08a45e24e5399}{Encrypted\+Io\+Queue\+Add\+Irp} (\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$queue, P\+I\+RP irp)
\begin{DoxyCompactList}\small\item\em Remove the lock on the queue and add the irp to the main queue then lock it. \end{DoxyCompactList}\item 
N\+T\+S\+T\+A\+T\+US \hyperlink{_encrypted_io_queue_8c_ab77b639f3198d83b16e9c40d51a216a6}{Encrypted\+Io\+Queue\+Hold\+When\+Idle} (\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$queue, int64 timeout)
\begin{DoxyCompactList}\small\item\em Duspend the queue, encrypt a single object and if success resume the queue. \end{DoxyCompactList}\item 
B\+O\+OL \hyperlink{_encrypted_io_queue_8c_ac22c3305ee5165c35b3219549465ca3e}{Encrypted\+Io\+Queue\+Is\+Suspended} (\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$queue)
\begin{DoxyCompactList}\small\item\em Getter for returning the suspended status. \end{DoxyCompactList}\item 
B\+O\+OL \hyperlink{_encrypted_io_queue_8c_a7cbf631c3cf7e097e265180816bdc1c7}{Encrypted\+Io\+Queue\+Is\+Running} (\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$queue)
\begin{DoxyCompactList}\small\item\em Getter of Stop\+Pending, return if the queue is running or not. \end{DoxyCompactList}\item 
N\+T\+S\+T\+A\+T\+US \hyperlink{_encrypted_io_queue_8c_ad7e9bb654c0698002b35c61097d35141}{Encrypted\+Io\+Queue\+Resume\+From\+Hold} (\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$queue)
\begin{DoxyCompactList}\small\item\em Resume the queue. \end{DoxyCompactList}\item 
N\+T\+S\+T\+A\+T\+US \hyperlink{_encrypted_io_queue_8c_a6d1efbe55f7d018780ddb98c563c5563}{Encrypted\+Io\+Queue\+Start} (\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$queue)
\begin{DoxyCompactList}\small\item\em Start the encrypting queue and launch the encryption in the main queue thread, the IO thread, and completion thread. \end{DoxyCompactList}\item 
N\+T\+S\+T\+A\+T\+US \hyperlink{_encrypted_io_queue_8c_aaba7c72656e927de5df6b2946d5f7c3b}{Encrypted\+Io\+Queue\+Stop} (\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$queue)
\begin{DoxyCompactList}\small\item\em Stop the encrypting queue. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Manage the fragment for encryption on the drive, the sending for irp packets and device filter. The encryption queue will order the axtions to do. 

\begin{DoxyVersion}{Version}
1.\+3.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
13/12/2016 
\end{DoxyDate}


\subsection{Function Documentation}
\mbox{\Hypertarget{_encrypted_io_queue_8c_a6ad0720d3b1044c4b1d08a45e24e5399}\label{_encrypted_io_queue_8c_a6ad0720d3b1044c4b1d08a45e24e5399}} 
\index{Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}!Encrypted\+Io\+Queue\+Add\+Irp@{Encrypted\+Io\+Queue\+Add\+Irp}}
\index{Encrypted\+Io\+Queue\+Add\+Irp@{Encrypted\+Io\+Queue\+Add\+Irp}!Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}}
\subsubsection{\texorpdfstring{Encrypted\+Io\+Queue\+Add\+Irp()}{EncryptedIoQueueAddIrp()}}
{\footnotesize\ttfamily N\+T\+S\+T\+A\+T\+US Encrypted\+Io\+Queue\+Add\+Irp (\begin{DoxyParamCaption}\item[{\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$}]{queue,  }\item[{P\+I\+RP}]{irp }\end{DoxyParamCaption})}



Remove the lock on the queue and add the irp to the main queue then lock it. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em P\+I\+RP} & irp \\
\hline
\mbox{\tt in}  & {\em \hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue}} & $\ast$ queue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+T\+S\+T\+A\+T\+US status if error S\+T\+A\+T\+U\+S\+\_\+\+P\+E\+N\+D\+I\+NG else 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{_encrypted_io_queue_8c_a6ad0720d3b1044c4b1d08a45e24e5399_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_encrypted_io_queue_8c_a6ad0720d3b1044c4b1d08a45e24e5399_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{_encrypted_io_queue_8c_ab77b639f3198d83b16e9c40d51a216a6}\label{_encrypted_io_queue_8c_ab77b639f3198d83b16e9c40d51a216a6}} 
\index{Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}!Encrypted\+Io\+Queue\+Hold\+When\+Idle@{Encrypted\+Io\+Queue\+Hold\+When\+Idle}}
\index{Encrypted\+Io\+Queue\+Hold\+When\+Idle@{Encrypted\+Io\+Queue\+Hold\+When\+Idle}!Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}}
\subsubsection{\texorpdfstring{Encrypted\+Io\+Queue\+Hold\+When\+Idle()}{EncryptedIoQueueHoldWhenIdle()}}
{\footnotesize\ttfamily N\+T\+S\+T\+A\+T\+US Encrypted\+Io\+Queue\+Hold\+When\+Idle (\begin{DoxyParamCaption}\item[{\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$}]{queue,  }\item[{int64}]{timeout }\end{DoxyParamCaption})}



Duspend the queue, encrypt a single object and if success resume the queue. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em int64} & timeout \\
\hline
\mbox{\tt in}  & {\em \hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue}} & $\ast$ queue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+T\+S\+T\+A\+T\+US S\+T\+A\+T\+U\+S\+\_\+\+S\+U\+C\+C\+E\+SS if success S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+S\+U\+C\+C\+E\+S\+S\+F\+UL if not 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=334pt]{_encrypted_io_queue_8c_ab77b639f3198d83b16e9c40d51a216a6_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{_encrypted_io_queue_8c_a7cbf631c3cf7e097e265180816bdc1c7}\label{_encrypted_io_queue_8c_a7cbf631c3cf7e097e265180816bdc1c7}} 
\index{Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}!Encrypted\+Io\+Queue\+Is\+Running@{Encrypted\+Io\+Queue\+Is\+Running}}
\index{Encrypted\+Io\+Queue\+Is\+Running@{Encrypted\+Io\+Queue\+Is\+Running}!Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}}
\subsubsection{\texorpdfstring{Encrypted\+Io\+Queue\+Is\+Running()}{EncryptedIoQueueIsRunning()}}
{\footnotesize\ttfamily B\+O\+OL Encrypted\+Io\+Queue\+Is\+Running (\begin{DoxyParamCaption}\item[{\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$}]{queue }\end{DoxyParamCaption})}



Getter of Stop\+Pending, return if the queue is running or not. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue}} & $\ast$ queue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
B\+O\+OL !queue-\/$>$Stop\+Pending 
\end{DoxyReturn}
\mbox{\Hypertarget{_encrypted_io_queue_8c_ac22c3305ee5165c35b3219549465ca3e}\label{_encrypted_io_queue_8c_ac22c3305ee5165c35b3219549465ca3e}} 
\index{Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}!Encrypted\+Io\+Queue\+Is\+Suspended@{Encrypted\+Io\+Queue\+Is\+Suspended}}
\index{Encrypted\+Io\+Queue\+Is\+Suspended@{Encrypted\+Io\+Queue\+Is\+Suspended}!Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}}
\subsubsection{\texorpdfstring{Encrypted\+Io\+Queue\+Is\+Suspended()}{EncryptedIoQueueIsSuspended()}}
{\footnotesize\ttfamily B\+O\+OL Encrypted\+Io\+Queue\+Is\+Suspended (\begin{DoxyParamCaption}\item[{\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$}]{queue }\end{DoxyParamCaption})}



Getter for returning the suspended status. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue}} & $\ast$ queue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
B\+O\+OL queue-\/$>$Suspended 
\end{DoxyReturn}
\mbox{\Hypertarget{_encrypted_io_queue_8c_ad7e9bb654c0698002b35c61097d35141}\label{_encrypted_io_queue_8c_ad7e9bb654c0698002b35c61097d35141}} 
\index{Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}!Encrypted\+Io\+Queue\+Resume\+From\+Hold@{Encrypted\+Io\+Queue\+Resume\+From\+Hold}}
\index{Encrypted\+Io\+Queue\+Resume\+From\+Hold@{Encrypted\+Io\+Queue\+Resume\+From\+Hold}!Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}}
\subsubsection{\texorpdfstring{Encrypted\+Io\+Queue\+Resume\+From\+Hold()}{EncryptedIoQueueResumeFromHold()}}
{\footnotesize\ttfamily N\+T\+S\+T\+A\+T\+US Encrypted\+Io\+Queue\+Resume\+From\+Hold (\begin{DoxyParamCaption}\item[{\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$}]{queue }\end{DoxyParamCaption})}



Resume the queue. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue}} & $\ast$ queue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+T\+S\+T\+A\+T\+US S\+T\+A\+T\+U\+S\+\_\+\+S\+U\+C\+C\+E\+SS 
\end{DoxyReturn}
\mbox{\Hypertarget{_encrypted_io_queue_8c_a6d1efbe55f7d018780ddb98c563c5563}\label{_encrypted_io_queue_8c_a6d1efbe55f7d018780ddb98c563c5563}} 
\index{Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}!Encrypted\+Io\+Queue\+Start@{Encrypted\+Io\+Queue\+Start}}
\index{Encrypted\+Io\+Queue\+Start@{Encrypted\+Io\+Queue\+Start}!Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}}
\subsubsection{\texorpdfstring{Encrypted\+Io\+Queue\+Start()}{EncryptedIoQueueStart()}}
{\footnotesize\ttfamily N\+T\+S\+T\+A\+T\+US Encrypted\+Io\+Queue\+Start (\begin{DoxyParamCaption}\item[{\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$}]{queue }\end{DoxyParamCaption})}



Start the encrypting queue and launch the encryption in the main queue thread, the IO thread, and completion thread. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue}} & $\ast$ queue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+T\+S\+T\+A\+T\+US S\+T\+A\+T\+U\+S\+\_\+\+S\+U\+C\+C\+E\+SS if success status if error 
\end{DoxyReturn}
\mbox{\Hypertarget{_encrypted_io_queue_8c_aaba7c72656e927de5df6b2946d5f7c3b}\label{_encrypted_io_queue_8c_aaba7c72656e927de5df6b2946d5f7c3b}} 
\index{Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}!Encrypted\+Io\+Queue\+Stop@{Encrypted\+Io\+Queue\+Stop}}
\index{Encrypted\+Io\+Queue\+Stop@{Encrypted\+Io\+Queue\+Stop}!Encrypted\+Io\+Queue.\+c@{Encrypted\+Io\+Queue.\+c}}
\subsubsection{\texorpdfstring{Encrypted\+Io\+Queue\+Stop()}{EncryptedIoQueueStop()}}
{\footnotesize\ttfamily N\+T\+S\+T\+A\+T\+US Encrypted\+Io\+Queue\+Stop (\begin{DoxyParamCaption}\item[{\hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue} $\ast$}]{queue }\end{DoxyParamCaption})}



Stop the encrypting queue. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \hyperlink{struct_encrypted_io_queue}{Encrypted\+Io\+Queue}} & $\ast$ queue \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+T\+S\+T\+A\+T\+US S\+T\+A\+T\+U\+S\+\_\+\+S\+U\+C\+C\+E\+SS 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=319pt]{_encrypted_io_queue_8c_aaba7c72656e927de5df6b2946d5f7c3b_cgraph}
\end{center}
\end{figure}
